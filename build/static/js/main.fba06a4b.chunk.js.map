{"version":3,"sources":["services/logService.js","services/httpService.js","services/authService.js","components/rentals.jsx","components/customers.jsx","services/movieService.js","services/genreService.js","components/common/listGroup.jsx","components/common/pagination.jsx","utils/paginate.js","components/common/like.jsx","components/common/TableBody.jsx","components/common/TableHeader.jsx","components/common/Table.jsx","components/moviesTable.jsx","components/common/searchBox.jsx","components/movies.jsx","components/navBar.jsx","components/notFound.jsx","components/common/input.jsx","components/common/select.jsx","components/common/form.jsx","components/movieForm.jsx","components/loginForm.jsx","services/userService.js","components/registerForm.jsx","components/logout.jsx","components/common/protectedRoute.jsx","App.js","index.js"],"names":["init","log","error","console","axios","interceptors","response","use","status","toast","logger","Promise","reject","get","post","put","delete","setJwt","jwt","defaults","headers","common","apiEndpoint","apiUrl","tokenKey","email","password","a","http","data","localStorage","setItem","getJwt","getItem","login","loginWithJwt","logout","removeItem","getCurrentUser","jwtDecode","Rentals","Customers","movieUrl","id","getMovie","movieId","deleteMovie","saveMovie","movie","_id","body","getGenres","ListGroup","items","selectedItem","textProperty","valueProperty","onItemSelect","className","map","item","onClick","style","cursor","defaultProps","Pagination","itemsCount","pageSize","currentPage","onPageChange","pageCount","Math","ceil","pages","_","range","page","paginate","pageNumber","startIndex","slice","take","value","Like","props","classes","liked","aria-hidden","TableBody","renderCell","column","content","path","createKey","key","this","columns","Component","TableHeader","raiseSort","sortColumn","order","onSort","renderSortIcon","label","Table","Moviestable","Link","to","title","onLike","delectColumn","auth","onDelete","user","isAdmin","push","movies","SearchBox","onChange","type","name","placeholder","e","currentTarget","Movies","state","genres","selectedGenre","searchQuery","handleDelete","originalMovies","filter","m","setState","handleLike","index","indexOf","handlePageChange","handleSort","handleGenreSelect","genre","handleSearch","query","getPageData","allMovies","filtered","toLowerCase","startsWith","orderBy","totalCount","length","count","Navbar","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","NavLink","exact","NotFound","Input","rest","htmlFor","Select","options","option","Form","errors","validate","Joi","schema","abortEarly","details","message","validateProperty","obj","handleSubmit","preventDefault","doSubmit","handleChange","input","errorMessage","disabled","MovieForm","genreId","numberInStock","dailyRentalRate","string","required","number","min","max","history","match","params","mapToViewModel","replace","populateGenres","populateMovies","onSubmit","renderInput","renderSelect","renderButton","LoginForm","username","location","window","from","pathname","Redirect","register","RegisterForm","userService","header","Logout","ProtectedRoute","component","render","Route","App","Switch","process","ReactDom","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.fba06a4b.chunk.js","sourcesContent":["// import * as Sentry from \"@sentry/react\";\n// import { Integrations } from \"@sentry/tracing\";\n\nfunction init() {\n  // console.info('asdasd');\n  // Sentry.init({\n  //   dsn: \"https://949bea1b1f5a4985a9d4dc6671e80e91@o924101.ingest.sentry.io/5872030\",\n  //   integrations: [new Integrations.BrowserTracing()],\n\n  //   // We recommend adjusting this value in production, or using tracesSampler\n  //   // for finer control\n  //   tracesSampleRate: 1.0,\n  // });\n}\n\nfunction log(error) {  \n  console.log(error);\n  // Sentry.captureException(error);\n}\n\nexport default {\n  init,\n  log\n}","import axios from 'axios';\nimport { toast } from 'react-toastify';\nimport logger from './logService';\n\naxios.interceptors.response.use(null, error => {\n  const expectedError = error.response && error.response.status >= 400 && error.response.status <= 500;\n  if (!expectedError) {\n    toast('unexpected error')\n    console.log('Logging error', error);\n    logger.log(error);\n  }\n  return Promise.reject(error);\n});\n\nfunction setJwt(jwt) {\n  axios.defaults.headers.common[\"x-auth-token\"] = jwt;\n}\n\nexport default {\n  get: axios.get,\n  post: axios.post,\n  put: axios.put,\n  delete: axios.delete,\n  setJwt\n};","import jwtDecode from 'jwt-decode';\nimport { apiUrl } from '../config.json';\nimport http from './httpService';\n\nconst apiEndpoint = apiUrl + '/auth';\nconst tokenKey = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function login(email, password) {\n  const { data: jwt } = await http.post(apiEndpoint, {\n    email: email,\n    password: password\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {  \n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(\"token\");\n}\n\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt\n}","import React from 'react';\n\nconst Rentals = () => {\n  return ( \n    <h1>Rentals</h1>\n   );\n}\n \nexport default Rentals;","import React from 'react';\n\nconst Customers = () => {\n  return ( \n    <h1>Customers</h1>\n  );\n}\n \nexport default Customers;","import { apiUrl } from '../config.json';\nimport http from './httpService';\n\nconst apiEndpoint = apiUrl + '/movies';\n\nfunction movieUrl(id) {\n  return `${apiEndpoint}/${id}` \n}\n\nexport function getMovies() {\n  return http.get(apiEndpoint);\n}\n\nexport function getMovie(movieId) {\n  return http.get(movieUrl(movieId));\n}\n\nexport function deleteMovie(movieId) {\n  return http.delete(movieUrl(movieId));\n}\n\nexport function saveMovie(movie) {\n  if (movie._id) {\n    const body = { ...movie }\n    delete body._id;\n    return http.put(movieUrl(movie._id), body);\n  }\n  return http.post(apiEndpoint, movie);\n}","import { apiUrl } from '../config.json';\nimport http from './httpService';\n\nconst apiEndpoint = apiUrl + '/genres'\n\nexport async function getGenres() {\n  return http.get(apiEndpoint);\n} ","import React from 'react';\n\nconst ListGroup = ({ items, selectedItem, textProperty, valueProperty, onItemSelect }) => {\n  return (\n    <ul className=\"list-group\">\n      {items.map(item => (\n        <li\n          key={item[valueProperty]} \n          onClick={() => onItemSelect(item)} \n          style={{cursor: 'pointer'}} \n          className={item === selectedItem ? 'list-group-item active':'list-group-item' }\n        >\n          {item[textProperty]}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nListGroup.defaultProps = {\n  textProperty: 'name',\n  valueProperty: '_id'\n}\n \nexport default ListGroup;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\n\nconst Pagination = ({ itemsCount, pageSize, currentPage, onPageChange }) => {\n  const pageCount = Math.ceil(itemsCount / pageSize);\n\n  if (pageCount === 1) return null;\n  const pages = _.range(1, pageCount + 1);\n\n  return ( \n    <nav>\n      <ul className=\"pagination\">\n        {pages.map(page => (\n          <li key={page} className={page === currentPage ? 'page-item active':'page-item'}>\n            <span className=\"page-link\" onClick={() => onPageChange(page)}>{ page }</span>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nPagination.propTypes = {\n  itemsCount: PropTypes.number.isRequired, \n  pageSize: PropTypes.number.isRequired, \n  currentPage: PropTypes.number.isRequired, \n  onPageChange: PropTypes.func.isRequired\n};\n \nexport default Pagination;","import _ from 'lodash';\n\nexport function paginate(items, pageNumber, pageSize) {\n  const startIndex = (pageNumber - 1) * pageSize;\n  return _(items)\n    .slice(startIndex)\n    .take(pageSize)\n    .value();\n} ","import React from 'react';\n\nconst Like = (props) => {\n  let classes = \"fa fa-heart\";\n  if (!props.liked) classes += \"-o\";\n  return (\n    <i \n      onClick={props.onClick} \n      style={{cursor:'pointer'}} \n      className={classes} \n      aria-hidden=\"true\"\n    ></i>\n  );\n}\n\nexport default Like;","import React, { Component } from 'react';\nimport _ from 'lodash';\n\nclass TableBody extends Component {\n  renderCell = (item, column) => {\n    if (column.content) return column.content(item);\n    return _.get(item, column.path);\n  }\n\n  createKey = (item, column) => {\n    return item._id + (column.path || column.key);\n  }\n \n  render() {\n    const { data, columns } = this.props;\n    return ( \n      <tbody>\n      { data.map(item => (\n        <tr key={item._id}>\n          {columns.map(column => (\n            <td key={this.createKey(item, column)}>\n              {this.renderCell(item, column)}\n            </td>\n          ))}\n        </tr>\n      ))}\n      </tbody>\n    );\n  }\n}\n \nexport default TableBody;","import React, { Component } from 'react';\n\nclass TableHeader extends Component {\n\n  raiseSort = path => {\n    const sortColumn = {...this.props.sortColumn};\n    if(sortColumn.path === path) {\n      sortColumn.order = sortColumn.order === 'asc' ? 'desc' : 'asc';\n    }\n    else {\n      sortColumn.path = path;\n      sortColumn.order = 'asc';\n    }\n    this.props.onSort(sortColumn);\n  }\n\n  renderSortIcon = column => {\n    const { sortColumn } = this.props;\n    if (column.path !== sortColumn.path || column.content ) return null;\n    if (sortColumn.order === 'asc') return <i className=\"fa fa-sort-asc\"></i>\n    return <i className=\"fa fa-sort-desc\"></i>;\n  }\n\n  render() {\n    return (\n      <thead>\n        <tr>\n          { this.props.columns.map(column => (\n            <th \n              key={column.path || column.key}\n              className='clickable'\n              onClick={()=>this.raiseSort(column.path)\n            }>\n              {column.label} {this.renderSortIcon(column)}\n            </th>\n          ))}\n        </tr>\n      </thead>\n    );\n  }\n}\n \nexport default TableHeader;","import React from 'react';\nimport TableBody from './TableBody';\nimport TableHeader from './TableHeader';\n\nconst Table = ({columns, data, sortColumn, onSort}) => {\n  return (  \n    <table className=\"table\"> \n      <TableHeader \n        columns={columns} \n        sortColumn={sortColumn} \n        onSort={onSort}  \n      />\n      <TableBody data={data} columns={columns} />\n    </table>\n  );\n}\n \nexport default Table;","import React, { Component } from 'react';\nimport auth from '../services/authService';\nimport Like from './common/like';\nimport Table from './common/Table';\nimport { Link } from 'react-router-dom';\n\n\nclass Moviestable extends Component {\n\n  columns = [\n    { path: \"title\", label: \"Title\", content: movie => (<Link to={`/movies/${movie._id}`}>{movie.title}</Link>) },\n    { path: \"genre.name\", label: \"Genre\" },\n    { path: \"numberInStock\", label: \"Stock\" },\n    { path: \"dailyRentalRate\", label: \"Rate\" },\n    { \n      key: \"Like\", \n      content: movie => (\n        <Like liked={movie.liked} onClick={() => this.props.onLike(movie)} />\n      )\n    }\n  ];\n\n  delectColumn = { \n    key: \"Delete\",\n    content: movie => (\n      auth.getCurrentUser() &&\n      <button \n        className=\"btn btn-danger\" \n        onClick={() => this.props.onDelete(movie._id)}\n      >\n        Delete\n      </button>\n    )\n  }\n\n  constructor() {\n    super();\n    const user = auth.getCurrentUser();\n    if (user && user.isAdmin) this.columns.push(this.delectColumn);\n }\n\n  render() { \n    const { movies, sortColumn, onSort } = this.props;\n\n    return (  \n      <Table \n        columns={this.columns} \n        data={movies} \n        sortColumn={sortColumn} \n        onSort={onSort} \n      />\n    );\n  }\n}\n \nexport default Moviestable;","import React from 'react';\n\nconst SearchBox = ({value, onChange}) => {\n  return (  \n    <input\n      type=\"text\"\n      name=\"query\"\n      className=\"form-control my-y\"\n      placeholder=\"Search...\"\n      value={value}\n      onChange={e => onChange(e.currentTarget.value)}\n    />\n  );\n}\n \nexport default SearchBox;","import React, { Component } from 'react';\nimport { getMovies, deleteMovie } from '../services/movieService';\nimport { getGenres } from '../services/genreService';\nimport ListGroup from './common/listGroup';\nimport Pagination from './common/pagination';\nimport { paginate } from '../utils/paginate';\nimport MoviesTable from './moviesTable';\nimport _ from 'lodash';\nimport { Link } from 'react-router-dom';\nimport SearchBox from './common/searchBox';\nimport { toast } from \"react-toastify\";\n\nclass Movies extends Component {\n  state = {  \n    movies: [],\n    genres: [],\n    pageSize: 2,\n    currentPage: 1,\n    selectedGenre: null,\n    sortColumn: { path: 'title', order:'asc' },\n    searchQuery: \"\"\n  }\n\n  async componentDidMount() {\n    const { data } = await getGenres();\n    const genres = [{ _id: '', name: \"All Genres\"}, ...data];\n    const { data: movies } = await getMovies();\n    this.setState({ movies, genres })\n  }\n\n   handleDelete = async (movieId) => {\n    const originalMovies = this.state.movies;\n    const movies = originalMovies.filter(m => m._id !== movieId);\n    this.setState({ movies });\n    try {\n      await deleteMovie(movieId);\n    } catch (error) {\n      if (error.response && error.response.status === 404)\n        toast.error('This movie has already been deleted.')\n      \n      this.setState({ movies: originalMovies });\n    }\n  }\n\n  handleLike = (movie) => {\n    const movies = [...this.state.movies];\n    const index = movies.indexOf(movie);\n    movies[index] = { ...movies[index] };\n    movies[index].liked = !movies[index].liked;\n    this.setState({ movies });\n  }\n\n  handlePageChange = page => {\n    this.setState({ currentPage : page })\n  }\n\n  handleSort = sortColumn => { \n    this.setState({ sortColumn })\n  }\n\n  handleGenreSelect = genre => {\n    this.setState({ selectedGenre: genre, searchQuery: \"\", currentPage: 1 });\n  }\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, selectedGenre:\"\", currentPage: 1 });\n  }\n\n  getPageData = () => {\n    const { pageSize, currentPage, selectedGenre, sortColumn, searchQuery, movies : allMovies } = this.state;\n\n    let filtered = allMovies;\n    if (searchQuery) {\n      console.log('searchQuery', searchQuery)\n      filtered = allMovies.filter(\n        m => m.title.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    }\n    else{\n      filtered = selectedGenre && selectedGenre._id\n        ? allMovies.filter(m => m.genre._id === selectedGenre._id) \n        : allMovies;\n    }\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const movies = paginate(sorted, currentPage, pageSize);\n\n    return {totalCount: filtered.length, data: movies};\n  }\n\n  render() {\n    const { length: count } = this.state.movies;\n    const { genres, pageSize, currentPage, selectedGenre, sortColumn, searchQuery} = this.state;\n    const { user } = this.props;\n\n    if (count === 0) \n      return <p>There are no movies in the database.</p>;\n\n    const {totalCount, data: movies} = this.getPageData();\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-3\">\n          <ListGroup \n            items={genres}\n            selectedItem={selectedGenre}\n            onItemSelect={this.handleGenreSelect} \n          />\n        </div>\n        <div className=\"col\">\n          { user && (\n            <Link \n              to=\"/movies/new\"\n              className=\"btn btn-primary mb-2\">\n                New Movie\n            </Link>\n            )\n          }\n          <p>Showing {totalCount} movies in the database.</p>\n          <SearchBox value={searchQuery} onChange={this.handleSearch}/>\n          <MoviesTable\n            movies={movies}\n            sortColumn={sortColumn}\n            onLike={this.handleLike}\n            onDelete={this.handleDelete}\n            onSort={this.handleSort}\n          />\n          <Pagination \n            itemsCount={totalCount} \n            pageSize={pageSize}\n            currentPage={currentPage}\n            onPageChange={this.handlePageChange}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n \nexport default Movies;","import React from 'react';\nimport { Link, NavLink } from \"react-router-dom\";\n\nconst Navbar = ({ user }) => {\n  return (  \n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light mb-3\">\n      <div className=\"container-fluid\">\n        <Link className=\"navbar-brand\" to=\"/\">Vidly</Link>\n        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n        <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\n          <ul className=\"navbar-nav\">\n            { user && (\n              <>\n                <NavLink className=\"nav-item nav-link\" exact to=\"/movies\">Movies</NavLink>\n                <NavLink className=\"nav-item nav-link\" to=\"/customers\">Customers</NavLink>\n                <NavLink className=\"nav-item nav-link\" to=\"/rentals\">Rentals</NavLink>\n              </>\n            )}\n            { !user && (\n                <>\n                  <NavLink className=\"nav-item nav-link\" to=\"/login\">Login</NavLink>\n                  <NavLink className=\"nav-item nav-link\" to=\"/register\">Register</NavLink>\n                </>\n            )}\n            { user && (\n                <>\n                  <NavLink className=\"nav-item nav-link\" to=\"/my-profile\">{user.name}</NavLink>\n                  <NavLink className=\"nav-item nav-link\" to=\"/logout\">Logout</NavLink>\n                </>\n            )}\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n}\n \nexport default Navbar;","import React from 'react';\n\nconst NotFound = () => {\n  return ( \n    <h1>Not Found</h1>\n  );\n}\n \nexport default NotFound;","import React from 'react';\n\nconst Input = ({ name, label, error, ...rest }) => {\n  return (  \n    <div className=\"form-group\">\n      { label && <label htmlFor={name}>{label}</label> }\n      <input \n        {...rest}\n        name={name}\n        id={name}\n        className=\"form-control\" \n      />\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n    </div>\n  );\n}\n \nexport default Input;","import React from 'react';\n\nconst Select = ({ name, label, options, error, ...rest }) => {\n  return (  \n    <div className=\"form-group\">\n      <label htmlFor={name}>{label}</label>\n      <select  \n        name={name}\n        id={name}\n        {...rest}\n        className=\"form-control\" \n      >\n        <option value=\"\" />\n        {options.map(option => (\n          \n          <option key={option._id} value={option._id}>\n            {option.name}\n          </option>\n        )\n        )}\n      </select>\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n    </div>\n  );\n}\n \nexport default Select;","import React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './input';\nimport Select from './select';\n\nclass Form extends Component {\n  state = {  \n    data: {},\n    errors: {}\n  }\n\n  validate = () => {\n    const options = {\n      abortEarly:false\n    };\n    const { error } = Joi.validate(this.state.data, this.schema, options);\n    if (!error) return null;\n  \n    const errors = {};\n    for(let item of error.details)\n      errors[item.path[0]] = item.message;\n\n    console.log('error', error);\n    return errors;\n  };\n\n  validateProperty = ({ name, value }) => {\n    const obj = {[name]: value};\n    const schema = {[name]: this.schema[name]};\n    const {error} = Joi.validate(obj, schema)\n    console.log('error', error);\n    return error ? error.details[0].message : null;\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const errors = this.validate();\n    this.setState({ errors: errors || {} });\n    if (errors) return;\n    // call server\n    this.doSubmit();\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage\n    else delete errors[input.name];\n    \n    const data = {...this.state.data};\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n  };\n\n  renderButton(label) {\n    return (\n      <button disabled={this.validate()} className=\"btn btn-primary\">\n        {label}\n      </button>\n    );\n  }\n\n  renderInput(name, label, type = \"text\") {\n    const { data, errors } = this.state;  \n    return (\n      <Input \n        type={type}\n        name={name}\n        value={data[name]} \n        label={label} \n        onChange={this.handleChange} \n        error={errors[name]}\n      />\n    );\n  }\n\n  renderSelect(name, label, options) {\n    const { data, errors } = this.state;  \n    return (\n      <Select \n        name={name}\n        value={data[name]} \n        label={label}\n        options={options} \n        onChange={this.handleChange} \n        error={errors[name]}\n      />\n    );\n  }\n\n}\n \nexport default Form;","import React from 'react';\nimport Joi from 'joi-browser' \nimport Form from './common/form';\nimport { getGenres } from '../services/genreService';\nimport { saveMovie, getMovie } from '../services/movieService';\n\nclass MovieForm extends Form {\n  state = {\n    data: { title: \"\", genreId: \"\", numberInStock: \"\", dailyRentalRate: \"\" },\n    genres: [],\n    errors: {}\n  };\n\n  async populateGenres() {\n    const { data: genres } = await getGenres();\n    this.setState({ genres });\n  }\n\n  async populateMovies() {\n    try {\n      const movieId = this.props.match.params.id;\n      if (movieId === 'new') return;\n      const {data: movie } = await getMovie(movieId);\n      this.setState({ data: this.mapToViewModel(movie) })\n    } catch (error) {\n      if (error.response && error.response.status === 404) \n        this.props.history.replace('/not-found');\n    }\n  }\n\n  async componentDidMount() {\n    await this.populateGenres();\n    await this.populateMovies();\n  }\n\n  mapToViewModel(movie) {\n    return {\n      _id: movie._id,\n      title: movie.title,\n      genreId: movie.genre._id,\n      numberInStock: movie.numberInStock,\n      dailyRentalRate: movie.dailyRentalRate\n    };\n  }\n\n  schema = {\n    _id: Joi.string(),\n    title: Joi.string().required().label('Title'),\n    genreId: Joi.string().required().label('Genre'),\n    numberInStock: Joi.number().min(0).max(10).label('Number in Stock'),\n    dailyRentalRate: Joi.number().min(0).max(10).label('Rate')\n  };\n\n  doSubmit = async () => {\n    await saveMovie(this.state.data);\n    this.props.history.push('/movies');\n  }\n\n  render() { \n    const { genres } = this.state;\n    return (  \n      <div>\n        <h1>Movie Form</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"title\", \"Title\")}\n          {this.renderSelect(\"genreId\", \"Genre\", genres)}\n          {this.renderInput(\"numberInStock\", \"Number in Stock\", \"number\")}\n          {this.renderInput(\"dailyRentalRate\", \"Rate\")}\n          {this.renderButton(\"Save\")}\n        </form>\n      </div>\n    )\n  }\n}\n \nexport default MovieForm;","import React, { Component } from 'react';\nimport Joi from 'joi-browser'\nimport { Redirect } from 'react-router-dom';\nimport Form from './common/form';\nimport auth from '../services/authService';\n\n\nclass LoginForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\"},\n    errors: {}\n  };\n\n  schema = {\n    username: Joi.string().required().label('Username'),\n    password: Joi.string().required().label('Password')\n  };\n\n  doSubmit = async () => {\n    try {\n      const { username, password } = this.state.data;\n      await auth.login(username, password);\n\n      const { state } = this.props.location;\n      window.location = state ? state.from.pathname : \"/\";\n\n    } catch (error) {\n      if (error.response && error.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = error.response.data;\n        this.setState({ errors });\n      }\n    }\n  }\n\n  render() {\n    if (!auth.getCurrentUser) return <Redirect to=\"/\" />\n\n    return (\n      <div>\n        <h1>Login</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput('username', 'Username')}\n          {this.renderInput('password', 'Password', 'password')}\n          {this.renderButton(\"Login\")}\n        </form>\n      </div>\n    );\n  }\n}\n \nexport default LoginForm;","import { apiUrl } from '../config.json';\nimport http from './httpService';\n\nconst apiEndpoint = apiUrl + '/users';\n\nexport function register(user) {\n  return http.post(apiEndpoint, {\n    email: user.username,\n    password: user.password,\n    name: user.name\n  });\n}","import React from 'react';\nimport Joi, { errors } from 'joi-browser';\nimport auth from '../services/authService';\nimport Form from './common/form';\nimport * as userService from '../services/userService';\n\nclass RegisterForm extends Form {\n  state = { \n    data: { username: \"\", password: \"\", name:\"\" },\n    errors: {}\n  };\n\n  schema = {\n    username: Joi.string().required().email().label('Username'),\n    password: Joi.string().required().min(5).label('Password'),\n    name: Joi.string().required().label('Name')\n  }\n\n  doSubmit = async () => {\n    try {\n      const response = await userService.register(this.state.data);\n      auth.loginWithJwt(response.header['x-auth-token']);\n      window.location = \"/\";\n    }\n    catch (error){\n      if (error.response && error.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = error.response.data;\n        this.setState({ errors });\n      }\n    }\n  }\n\n  render() { \n    return (  \n      <div>\n        <h1>Register</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput('username', 'Username')}\n          {this.renderInput('password', 'Password'), 'password'}\n          {this.renderInput('name', 'Name')}\n          {this.renderButton('Register')}\n        </form>\n      </div>\n    );\n  }\n}\n \nexport default RegisterForm;","import React, { Component } from 'react';\nimport auth from '../services/authService';\n\nclass Logout extends Component {\n  componentDidMount () {\n    auth.logout();\n    window.location = \"/\";\n  }\n  render() { \n    return null;\n  }\n}\n \nexport default Logout;","import React from 'react';\nimport auth from '../../services/authService';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ path, component: Component, render, ...rest }) => {\n  return (  \n    <Route\n        {...rest}\n        render={props => {\n          if (!auth.getCurrentUser()) return <Redirect to={{\n            pathname:'/login',\n            state: { from: props.location }\n          }} />;\n          return Component ? <Component {...props} /> : render(props);\n        }\n      }\n    />\n  );\n}\n \nexport default ProtectedRoute;","import React, { Component } from 'react';\nimport { Route, Switch, Redirect} from 'react-router-dom';\nimport { ToastContainer } from \"react-toastify\";\nimport auth from './services/authService';\nimport Rentals from './components/rentals';\nimport Customers from './components/customers';\nimport Movies from './components/movies';\nimport Navbar from './components/navBar';\nimport NotFound from './components/notFound';\nimport MovieForm from './components/movieForm';\nimport LoginForm from './components/loginForm';\nimport RegisterForm from './components/registerForm';\nimport Logout from './components/logout';\nimport ProtectedRoute from './components/common/protectedRoute';\nimport \"./index.css\";\nimport 'react-toastify/dist/ReactToastify.css';\n\n\n\nclass App extends Component {\n  state = {};\n\n  componentDidMount() {\n    const user = auth.getCurrentUser();\n    this.setState({user});\n  }\n\n  render() { \n    const { user } = this.state;\n    return ( \n      <main className=\"container\">\n        <ToastContainer />\n        <Navbar user={user} />\n        <Switch>\n          <Route path=\"/logout\" component={Logout} />\n          <Route path=\"/register\" component={RegisterForm} />\n          <Route path=\"/login\" component={LoginForm} />\n          <ProtectedRoute \n            path=\"/movies/:id\" \n            component={MovieForm}\n          />\n          <Route path=\"/movies\" \n            render={props => <Movies {...props} user={user} />}\n          />\n          <ProtectedRoute path=\"/customers\" component={Customers} />\n          <Route path=\"/rentals\" component={Rentals} />\n          <Route path=\"/not-found\" component={NotFound}/>\n          <Redirect from=\"/\" exact to=\"movies\" />\n          <Redirect to=\"/not-found\" />\n        </Switch>\n      </main>\n    );\n  }\n}\n \nexport default App;\n","import React from \"react\";\nimport ReactDom from \"react-dom\";\nimport { BrowserRouter } from 'react-router-dom';\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport App from \"./App\";\n\nconsole.log('SUPERMAN', process.env.REACT_APP_NAME);\n  \nReactDom.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById(\"root\"));"],"sourceRoot":""}